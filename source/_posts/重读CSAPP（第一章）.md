title: 重读CSAPP（第一章）
categories: CSAPP
date: 2014-11-12 21:00:49
tags: [os, csapp, 读书笔记]
description: 对操作系统基本概念和知识的总结
---

>**写在前面的话**:
前几天在知乎提了一个问题，然后把自己的博客贴上去了。收到了很多批评和理解。
自己也觉得我学习的方式确实有问题，所以，现在正在努力的改正，改变过去。
我想，一个人有错是难免的，但是我想，我只要有一个好的态度，
嗯，然后有一个勇于改正自己的心就好了。我相信我能变好的。这次再写和读书有关的文章，
不会在像以前一样有点抄书的样子了，我尽量写一些自己的理解，以及对自己度过内容的总结。有不足指出也希望大家能够给我指出来。当然，不要太凶（`(*∩_∩*)′）。
>


<br/>





CSAPP是一本我觉得让你能够构建一个计算机知识体系的书，这本书是我男神推荐我读的，之前读了前三章，因为一些事耽搁就没在继续读了，但是，OS真的是我喜欢的东西，所以，这次希望自己一鼓作气，读完它。
并且这本书也是CMU的经典教材，最宝贵的我觉得还是这本书自带的project，确实很珍贵，希望有看这本书的朋友一定把这几个project一定都做了。

第一章主要还是从笔者的角度带我们预览或者说了解了一些计算机中的一些软硬件的知识，并且也介绍了，操作系统其实就是计算机中的软硬件结合部分，它相当于一座桥梁，能够让软件和硬件这两大家族能够进行良好的交流。

以一个c语言的程序为例，展开来讲。书中像我们说明了，系统中所有的信息都是通过一串比特流来表示的，也就是01串，当然，有时候我们可能会重复用到一个同样的01串，但是，
计算机会根据上下文，也就是说程序执行的具体环境吧（我是这么理解的），来解释这些01串，以完成我们想要表示的多种信息。

一个hello.c的源程序本身是一个文本文件，里面存储了我们写好的代码。因为这种高级语言的代码是为了方便我们能够看懂的，但是计算机的底层不一定明白。
计算机的高级语言有很多种，但是低级语言，也就是通用语言，通常被称为是汇编语言。汇编语言是更接近计算机底层的一种语言，因为组成计算机的硬件的结构大体相同，所以，
这种低级语言可以算作是计算机的通用语言，无论我们用c，Java，c#还是其他的一些编程语言来写程序，最终交给计算机执行的时候，都要转化成相应的低级机器语言指令。

当我们在IDE中写了一个打印helloworld的程序的时候，通过编译器的编译，连接，最后生成一个exe文件能够运行。那么这之中到底经历了什么变化？

<br/>
## 一个C语言程序的旅程

hello.c----->hello.i(预处理器#inlcude)------->hello.s(编译器翻译成汇编语言程序)------->hello.o(汇编器将汇编程序翻译成低级机器指令，此时文件内容是2进制的)--------->hello（通过连接器将一些库函数进行连接得到可执行文件）


上述过程基本上就是一个C语言程序从有到无的变换，括号中的解释都是大致的举了一个例子或者说是我自己的理解，帮助大家认识每一步都做了什么。


之后的篇幅，大致介绍了计算机硬件组成。主要有一些几点，总结一下，加深印象：
- 总线：计算机内部的传输通道，连接的计算机中的硬件，为他们传输信息
- I/O设备：算是计算机中比较大的一块了，感觉计算机中运行速度也主要在这里做了很多优化。关于这里有一个我觉得比较重要的概念，以前没有分清：
- 每一个I/O设备都通过一个控制器和一个适配器与总线相连。控制器就是一个芯片组，而适配器是一个插在主板插槽上面的卡，比如网卡，显卡。
- 处理器：也就是我们常说的CPU，里面的PC计数器，也就是程序计数器总是会指向计算机要执行的下一条指令的地址。

<br/>
## CPU 主存 硬盘的关系
其实，学过操作系统的人都明白，计算机的运算速度还是很快的，但是这个运算速度仅仅指的是CPU处理指令的速度。但是有的时候为什么计算机会出现卡的现象呢，是因为计算机在完成一个任务的时候，把绝大部分时间都放在了信息的I/O上面。也就是说，CPU要处理的数据只能够从寄存器中获取，寄存器的信息要从内存当中获取，如果内存当中没有就要从硬盘先调入到内存，然后再把数据发送给CPU。由于这样做的速度 一直比较慢，并且根据操作系统的**局部性原理**，我运行一条指令，那么存储在他周围的指令我很可能也会用到，我上一次用到的，我可能很快还会用到。根据这种特点，我们就设计了空间小，速度快的高速缓存作为一个缓冲区。记录一下CPU近期内使用频率较高的数据，以及附近的数据，把他们存储到高速缓存中。因为告诉缓存还有CPU内部的寄存器都有空间小但是速度快的特点，所以大部分的数据和指令可能都不用从内存中找了，直接在上面两个存储器中就可以找到。
<br/>
## 存储等级
计算机当中需求不同，设备自然也不同。要求速度快，当然需要告诉缓存这样的存储器，需要容量大，那么就需要像硬盘这种存储器。存储器根据存取速度和容量大小划分等级，上一层的存储器是下一层存储器的高速缓存。
<br/>
## 进程
进程简而言之就是运行当中的程序。对单处理器系统而言，可以运行多个进程，通过进程的切换让人们造成一种计算机可以同时运行多个任务。其实这种假象是靠频繁的进程切换实现的。多线程的出现也提供了进程的工作效率。
<br/>
## 内存的结构
计算机的内存分为系统区和用户区，系统区是专门留给操作系统的，他人不得插手。对于每个进程来说，他们都会误以为自己是独占内存当中的用户区的，这就是计算机当中的虚拟存储器，他给了每一个进程一个虚拟的地址空间。内存从高到低，地址依次降低。

用户区中比较常见的固定 区域有堆，栈，共享区域，代码数据区域。每一个位置都有自己特定的作用，其余的都是自由空间。

<br/>
## 总结
基本来说，第一章就是介绍了一些基础的知识，对操作系统的一些概念做了解释。感觉重点的只有一个：就是要理解并且记住，计算机当中抽象是非常重要的。常用的计算机当中的抽象有三个：
1. 文件是对I/O的抽象，这点用过linux的人都知道
2. 虚拟存储器是对内存和硬盘的抽象（学过OS的人都知道，这里不好展开解释）
3. 进程是对运行当中程序的抽象

抽象，我的理解就是让东西变得更加傻瓜和友好，最大限度的屏蔽掉所有的实现细节，让用户能够更容易的使用。比如，本来运行当中的程序是看不到的（我指的是计算机内部中），但是通过抽象成进程，我们就能够对它有一个更加清晰的认识。所以说，抽象有的时候能帮我们理解一些复杂的东西。






